// -- Directory where the Project Files are located.  
def JOB_FILES_DIRECTORY
// -- Directory where the Platform Tools is located
def PLATFORM_TOOL_DIRECTORY
// -- Directory where the Android Emulator is located
def EMULATOR_DIRECTORY
// -- Path of the Suite to execute
def SUITE_PATH

pipeline {
    agent{
        docker {
            image 'windsekirun/jenkins-android-docker:1.1.1'
        }
     }
     options {
         skipStagesAfterUnstable()
     }
     stages {
         stage ('Prepare'){
             steps {
                 sh 'chmod +x ./gradlew'
             }
         }
         
               stage('Start Emulator') { 
             steps {
             bat "D:\Tools\Dev\sdk\tools\emulator.exe -avd Nexus_5X_API_24"
                 //   sh 'emulator @Nexus_Emulator_API_24'
                 //   sh 'appium &'  
     
          // You're set to go, now execute your UI test
    //      sh 'rspec spec -fd'
                   }
               }
         
         
         stage('Compile') {
              steps {
                  sh './gradlew compileDebugSources'
              }
         }
         
         
   
         
         stage('Build APK') {
             steps {
                 sh "./gradlew assembleDebug assembleAndroidTest"
             }
         }

      
          stage('Unit test') { 
             steps {
                 sh "./gradlew testDebugUnitTest"
             
              }
        }
              
              
     }
}
